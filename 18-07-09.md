2018-07-09 (월)

# 학습 목표

##  7월 2주차 목표: 코틀린에 익숙해지기

- ### Kotlin Toy Project 진행 - 계산기 만들기 (Calculator)

  - Kotlin의 개념을 익히고, 문법에 익숙해진다
  - 보다 나은 리팩토링 방법을 학습한다
  - 테스트 코드 작성 방법을 학습한다
- ### Android Testing Codelab 학습

  - MVP 패턴 이해와 테스트 코드 작성 방법에 대한 가이드 라인을 따라 학습해 본다
  - 좋은 코딩 예시로 활용한다

# 학습 내용

- ## Calculator 리팩토링

  - Q. 전역변수로 사칙연산 모드들을 정의해 놓았는데, 너저분해 보이는 것 같다. 이 변수들을 어떻게 하면 좋을까
    - A. 불필요한 전역변수를 많이 선언해 놓는 것은 좋지 않다. **변수의** **필요성**에 대한 고찰이 필요하다.
    - solve
      - 변수 선언부를 줄일 수 있는 방법 리서치 후, 변수들을 하나의 클래스로 빼내는 방식 선택
      - CalculateMode 클래스를 작성하여 plusMode, minusMode, multiplyMode, divideMode를 넣어 놓고 사용하였다
  - Q. class로 빼내는 방식을 선택하여 취했는데, 이 방법이 최선의 방법일지는 잘 모르겠다
    - A. class로 빼내는 방식도 하나의 방법이 될 수 있으나, 여러 가지 방법이 존재할 수 있다. 추가로 data class를 익숙하게 다룰 수 있게 되는 것이 좋으며 data class와 class의 차이점을 명확히 이해하고 사용해 봄이 좋다.
    - solve
      - class CalculateMode => data class CalculateMode
      - data class 내의 변수들은 val로 선언하고, MainActivity 내에서 CalculateMode 객체를 생성하여 비교하는 방식으로 수정했다. 사칙연산 모드 변수들을 초기화하고 한 개의 연산만 true로 바꿔 주던 작업이 필요 없게 되었고 가독성도 나아져 보인다.
      - data class는 equals(), hashCode()를 오버라이드 하며, 데이터를 비교하여 구조적으로 같은 경우에는 모두 동등하다 나타낸다. (인스턴스가 아닌 데이터를 비교하는 것임에 유의!) 따라서 calculateMode == CalculateMode(plusMode = true)와 같은 비교를 할 수 있었다.
  - Q. 더 보완해야 할 점으로는 어떤 것이 있을지 궁금하다
    - A. 반복되는 코드는 합치는 것이 좋다.
    - A. 가독성 좋은 네이밍에 신경을 쓰도록.
    - A. 레이니스트에서는 라이프 사이클 코드를 가장 상단에 위치시킨다.
    - A. 테스팅에 용이한 프로그래밍을 했는지 신경 쓰는 것이 좋다.
    - solve
      - 반복되는 코드 함수로 분리 - insertFirstNumber(), calculate()
      - onCreate() 함수 가장 상단으로 이동
  - Q. 테스트 코드를 한 번도 작성해 본 적이 없다. 어떻게 하면 좋을까? 보통 어느 경우에 테스팅을 하는지?
    - A. 보통의 경우로 접근하기 보다는 프로젝트 내에서 자신이 검사해 보고 싶은 부분을 테스팅 한다.
    - A. 1. 무엇을 2. 어떻게 테스팅 할 것인지에 대해 생각해 보고 코드를 작성한다.
    - A. 기본적인 사용 방법으로는 가장 앞에 @Test를 붙이고, 테스트 해 보고 싶은 부분에 대한 테스트를 작성하면 된다. 시험해 보고 싶은 부분을 함수로 빼낸 뒤, 함수 내에서 activity를 호출하고 원하는 작업을 작성한 뒤 @Test 내에서 사용하는 등의 방법을 취한다.

- ## Calculator Test Code 작성

  - Test Code를 작성하기에 용이한 프로그래밍을 하였는지 검토해야 한다

  - 테스트해 보고 싶은 목록을 작성한다

    1. 사칙연산이 제대로 되는지 => 완료
    2. resultMode의 동작이 제대로 되는지
    3. 아무 숫자도 들어오지 않았는데 연산자를 누른 경우, 아무것도 출력하지 않는지
    4. 같은 연산자가 연속해서 눌리는 경우, 숫자를 누르기 전까지 아무 작업도 하지 않는지
    5. 숫자가 너무 클 경우, 더이상 큰 값을 입력하지 않게 하는지
    6. 숫자가 너무 작을 경우, 더이상 작은 값을 입력하지 않게 하는지
    7. 다른 연산자가 연속해서 눌리는 경우, 마지막으로 눌린 연산자로 연산을 진행하는지
    8. 숫자 없이 연산자들만 눌린 후 =을 누른 경우, 아무것도 출력하지 않는지

- ## Android Testing Codelab 학습

  - ~5. MVP in practice 부분까지 읽어 봤다. 여기까진 내가 코딩할 부분은 없었고, MVP로 짜여진 프로젝트 구조에 대한 설명이 자세히 나와 있어서 MVP를 차근차근히 이해해 볼 수 있어서 좋았다.
  - Calculator 프로젝트를 진행하느라 더 볼 시간이 없어서 중간에 멈췄는데, 틈틈이 학습해 보면 프로젝트 구조를 잡는 데에 도움이 될 것 같다.
  - Calculator Test Code를 작성하기 위해 Codelab의 테스트 코드 예시도 슬쩍 봤는데 프로젝트 구조를 조금 더 명확히 이해하고 테스팅 부분을 다시 공부해 보면 많은 도움이 될 것 같다.

